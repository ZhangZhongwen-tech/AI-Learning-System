<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>AIåŠ©å­¦ç³»ç»Ÿ - è¯¾å‰è¯¾ä¸­è¯¾åå…¨æµç¨‹æ”¯æŒ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary-color: #1677ff;
            --secondary-color: #52c41a;
            --warning-color: #fa8c16;
            --light-bg: #f0f2f5;
            --card-bg: #ffffff;
            --border-color: #e5e6eb;
        }
        
        body {
            background-color: var(--light-bg);
            padding: 0;
            display: flex;
            min-height: 100vh;
        }
        
        /* ä¾§è¾¹å¯¼èˆª */
        .sidebar {
            width: 250px;
            background: white;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
        }
        
        .logo {
            text-align: center;
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 10px;
        }
        
        .logo h2 {
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        .logo p {
            font-size: 12px;
            color: #666;
        }
        
        .nav-item {
            padding: 15px 25px;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 4px solid transparent;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .nav-item i {
            width: 20px;
            text-align: center;
        }
        
        .nav-item.active {
            background: #f0f7ff;
            border-left: 4px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        .nav-item:hover {
            background: #f5f5f5;
        }
        
        /* ä¸»å†…å®¹åŒº */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .section {
            display: none;
            flex: 1;
            flex-direction: column;
            background: white;
            margin: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .section.active {
            display: flex;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            border-bottom: 1px solid var(--border-color);
            background: #fafafa;
        }
        
        .badge {
            background: var(--primary-color);
            color: white;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 12px;
            margin-left: 10px;
        }
        
        .section-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        /* è¯¾å‰é¢„ä¹ æ ·å¼ */
        .preview-levels {
            display: flex;
            gap: 15px;
            padding: 15px 20px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .level-card {
            flex: 1;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .level-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .level-card.active {
            border-color: var(--primary-color);
            background: #f0f9ff;
        }
        
        .level-card h4 {
            margin-bottom: 5px;
        }
        
        .level-card p {
            font-size: 12px;
            color: #666;
        }
        
        /* æ–°å¢ï¼šçŸ¥è¯†ç‚¹è¾“å…¥åŒºåŸŸ */
        .topic-input-container {
            padding: 15px 20px;
            border-bottom: 1px solid var(--border-color);
            background: #f9f9f9;
        }
        
        .topic-input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .topic-input-label {
            font-size: 14px;
            font-weight: 500;
            color: #333;
        }
        
        .topic-input {
            display: flex;
            gap: 10px;
        }
        
        .topic-input-field {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            font-size: 14px;
            outline: none;
        }
        
        .topic-input-field:focus {
            border-color: var(--primary-color);
        }
        
        .topic-suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
        }
        
        .topic-suggestion {
            background: #f0f7ff;
            color: var(--primary-color);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .topic-suggestion:hover {
            background: var(--primary-color);
            color: white;
        }
        
        .preview-actions {
            display: flex;
            gap: 10px;
            padding: 15px 20px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }
        
        .btn-primary {
            background: var(--primary-color);
            color: white;
        }
        
        .btn-secondary {
            background: var(--secondary-color);
            color: white;
        }
        
        .btn-warning {
            background: var(--warning-color);
            color: white;
        }
        
        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .preview-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            line-height: 1.6;
			max-height: 300px;
        }
        
        .preview-content h4 {
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .preview-content ul {
            padding-left: 20px;
            margin: 10px 0;
        }
        
        .preview-content li {
            margin-bottom: 5px;
        }
        
        /* è¯¾ä¸­å­¦ä¹ æ ·å¼ */
        .code-editor-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        .code-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            border-right: 1px solid var(--border-color);
        }
        
        .code-toolbar {
            display: flex;
            padding: 10px 15px;
            border-bottom: 1px solid var(--border-color);
            gap: 10px;
        }
        
        .code-editor {
            flex: 1;
            border: none;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: none;
            outline: none;
            line-height: 1.5;
        }
        
        .code-output {
            height: 150px;
            border-top: 1px solid var(--border-color);
            padding: 10px 15px;
            background: #f7f8fa;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        
        .chat-area {
            width: 40%;
            display: flex;
            flex-direction: column;
            border-left: 1px solid var(--border-color);
        }
        
        /* è¯¾åå¤ä¹ æ ·å¼ */
        .progress-container {
            padding: 15px 20px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .progress-bar {
            height: 8px;
            background: #eee;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress {
            height: 100%;
            background: var(--secondary-color);
            width: 65%;
            transition: width 0.5s ease;
        }
        
        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
        }
        
        .suggestion-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
        }
        
        .suggestion-tag {
            background: #f0f7ff;
            color: var(--primary-color);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            border: 1px solid #d0e3ff;
        }
        
        .personalized-tasks {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            padding: 20px;
        }
        
        .task-card {
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
        }
        
        .task-card:hover {
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .task-difficulty {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 12px;
            margin-bottom: 10px;
        }
        
        .difficulty-easy {
            background: #f6ffed;
            color: #52c41a;
            border: 1px solid #b7eb8f;
        }
        
        .difficulty-medium {
            background: #fff7e6;
            color: #fa8c16;
            border: 1px solid #ffd591;
        }
        
        .difficulty-hard {
            background: #fff2f0;
            color: #ff4d4f;
            border: 1px solid #ffccc7;
        }
        
        .task-content {
            flex: 1;
        }
        
        .task-content h4 {
            margin-bottom: 8px;
        }
        
        .task-content p {
            font-size: 13px;
            color: #666;
            line-height: 1.4;
        }
        
        .task-actions {
            margin-top: 15px;
        }
        
        /* èŠå¤©åŒºåŸŸé€šç”¨æ ·å¼ */
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            background-color: #f7f8fa;
			max-height: 200px;
        }
        
        .message {
            margin-bottom: 15px;
            max-width: 80%;
        }
        
        .user-message {
            margin-left: auto;
            background-color: var(--primary-color);
            color: white;
            padding: 10px 15px;
            border-radius: 18px 18px 0 18px;
        }
        
        .ai-message {
            margin-right: auto;
            background-color: white;
            border: 1px solid var(--border-color);
            padding: 10px 15px;
            border-radius: 18px 18px 18px 0;
        }
        
        .message-author {
            font-size: 12px;
            margin-bottom: 5px;
            opacity: 0.7;
        }
        
        .chat-input {
            display: flex;
            padding: 15px;
            border-top: 1px solid var(--border-color);
            background: white;
        }
        
        .message-input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 25px;
            outline: none;
            font-size: 14px;
        }
        
        .send-button {
            margin-left: 10px;
            padding: 12px 25px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .send-button:hover {
            background-color: #0d66d0;
        }
        
        .send-button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        
        .loading {
            color: #999;
            font-style: italic;
            text-align: center;
            padding: 10px;
        }
        
        .status-message {
            padding: 10px 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-size: 14px;
        }
        
        .status-success {
            background: #f6ffed;
            color: #52c41a;
            border: 1px solid #b7eb8f;
        }
        
        .status-error {
            background: #fff2f0;
            color: #ff4d4f;
            border: 1px solid #ffccc7;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            body {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
            }
            
            .preview-levels {
                flex-direction: column;
            }
            
            .code-editor-container {
                flex-direction: column;
            }
            
            .chat-area {
                width: 100%;
                height: 300px;
            }
            
            .topic-input {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- ä¾§è¾¹å¯¼èˆª -->
    <div class="sidebar">
        <div class="logo">
            <h2>AIåŠ©å­¦ç³»ç»Ÿ</h2>
            <p>è¯¾å‰Â·è¯¾ä¸­Â·è¯¾åå…¨æµç¨‹æ”¯æŒ</p>
        </div>
        
        <div class="nav-item active" data-target="pre-class">
            <i>ğŸ“š</i> è¯¾å‰é¢„ä¹ 
        </div>
        <div class="nav-item" data-target="in-class">
            <i>ğŸ’»</i> è¯¾ä¸­å­¦ä¹ 
        </div>
        <div class="nav-item" data-target="after-class">
            <i>ğŸ“</i> è¯¾åå¤ä¹ 
        </div>
        <div class="nav-item" data-target="progress">
            <i>ğŸ“Š</i> å­¦ä¹ è¿›åº¦
        </div>
    </div>
    
    <!-- ä¸»å†…å®¹åŒº -->
    <div class="main-content">
        <!-- è¯¾å‰é¢„ä¹ åŒºåŸŸ -->
        <div class="section active" id="pre-class">
            <div class="section-header">
                <h2>è¯¾å‰é¢„ä¹  <span class="badge">ä¸ªæ€§åŒ–åˆ†å±‚</span></h2>
            </div>
            
            <div class="preview-levels">
                <div class="level-card active" data-level="easy">
                    <h4>åŸºç¡€ç‰ˆ</h4>
                    <p>é€‚åˆéœ€è¦å·©å›ºåŸºç¡€çŸ¥è¯†çš„åŒå­¦</p>
                </div>
                <div class="level-card" data-level="medium">
                    <h4>æ ‡å‡†ç‰ˆ</h4>
                    <p>é€‚åˆå¤§å¤šæ•°åŒå­¦çš„å­¦ä¹ èŠ‚å¥</p>
                </div>
                <div class="level-card" data-level="hard">
                    <h4>è¿›é˜¶ç‰ˆ</h4>
                    <p>é€‚åˆå­¦æœ‰ä½™åŠ›çš„åŒå­¦æ‹“å±•å­¦ä¹ </p>
                </div>
            </div>
            
            <!-- æ–°å¢ï¼šçŸ¥è¯†ç‚¹è¾“å…¥åŒºåŸŸ -->
            <div class="topic-input-container">
                <div class="topic-input-group">
                    <div class="topic-input-label">è¯·è¾“å…¥è¦é¢„ä¹ çš„çŸ¥è¯†ç‚¹ï¼š</div>
                    <div class="topic-input">
                        <input type="text" class="topic-input-field" id="preview-topic" placeholder="ä¾‹å¦‚ï¼šPythonå¾ªç¯ç»“æ„ã€å‡½æ•°å®šä¹‰ã€åˆ—è¡¨æ“ä½œç­‰">
                        <button class="btn btn-primary" id="set-topic">ç¡®å®š</button>
                    </div>
                    <div class="topic-suggestions">
                        <div class="topic-suggestion" data-topic="Pythonå¾ªç¯ç»“æ„">Pythonå¾ªç¯ç»“æ„</div>
                        <div class="topic-suggestion" data-topic="å‡½æ•°å®šä¹‰ä¸è°ƒç”¨">å‡½æ•°å®šä¹‰ä¸è°ƒç”¨</div>
                        <div class="topic-suggestion" data-topic="åˆ—è¡¨ä¸å­—å…¸æ“ä½œ">åˆ—è¡¨ä¸å­—å…¸æ“ä½œ</div>
                        <div class="topic-suggestion" data-topic="æ¡ä»¶åˆ¤æ–­è¯­å¥">æ¡ä»¶åˆ¤æ–­è¯­å¥</div>
                        <div class="topic-suggestion" data-topic="æ–‡ä»¶è¯»å†™æ“ä½œ">æ–‡ä»¶è¯»å†™æ“ä½œ</div>
                    </div>
                </div>
            </div>
            
            <div class="preview-actions">
                <button class="btn btn-primary" id="generate-preview">ç”Ÿæˆé¢„ä¹ ææ–™</button>
                <button class="btn btn-secondary" id="generate-quiz">ç”Ÿæˆé¢„ä¹ æµ‹éªŒ</button>
            </div>
            
            <div class="section-content">
                <div class="preview-content" id="preview-material">
                    <p>è¯·é€‰æ‹©æ‚¨çš„å­¦ä¹ æ°´å¹³ï¼Œè¾“å…¥è¦é¢„ä¹ çš„çŸ¥è¯†ç‚¹ï¼Œç„¶åç‚¹å‡»"ç”Ÿæˆé¢„ä¹ ææ–™"æŒ‰é’®ï¼ŒAIå°†æ ¹æ®æ‚¨çš„å­¦ä¹ æ°´å¹³å’ŒçŸ¥è¯†ç‚¹ç”Ÿæˆä¸ªæ€§åŒ–é¢„ä¹ å†…å®¹ã€‚</p>
                </div>
                
                <div class="chat-messages" id="preview-chat-messages">
                    <div class="message ai-message">
                        <div class="message-author">AIåŠ©æ‰‹</div>
                        ä½ å¥½ï¼åœ¨é¢„ä¹ ä¸­é‡åˆ°ä»»ä½•é—®é¢˜éƒ½å¯ä»¥éšæ—¶é—®æˆ‘ã€‚
                    </div>
                </div>
                
                <div class="chat-input">
                    <input type="text" class="message-input" id="preview-message-input" placeholder="è¾“å…¥ä½ çš„é¢„ä¹ é—®é¢˜...">
                    <button class="send-button" id="preview-send-button">å‘é€</button>
                </div>
            </div>
        </div>
        
        <!-- è¯¾ä¸­å­¦ä¹ åŒºåŸŸ -->
        <div class="section" id="in-class">
            <div class="section-header">
                <h2>è¯¾ä¸­å­¦ä¹  <span class="badge">å®æ—¶æ”¯æŒ</span></h2>
                <div>
                    <button class="btn btn-warning" id="save-project">ä¿å­˜é¡¹ç›®</button>
                    <button class="btn btn-secondary" id="export-code">å¯¼å‡ºä»£ç </button>
                </div>
            </div>
            
            <div class="section-content">
                <div class="code-editor-container">
                    <div class="code-area">
                        <div class="code-toolbar">
                            <button class="btn btn-secondary" id="debug-code">AIè°ƒè¯•åŠ©æ‰‹</button>
                            <button class="btn btn-warning" id="explain-code">è§£é‡Šä»£ç </button>
                        </div>
                        <textarea class="code-editor" id="code-editor" placeholder="åœ¨è¿™é‡Œç¼–å†™ä½ çš„ä»£ç ..."># æ¬¢è¿ä½¿ç”¨ç¼–ç¨‹å®è·µåŒº
# ä½ å¯ä»¥åœ¨è¿™é‡Œç¼–å†™ä»£ç ï¼ŒAIä¼šå¸®åŠ©ä½ è°ƒè¯•å’Œè§£å†³é—®é¢˜

def calculate_average(numbers):
    if len(numbers) == 0:
        return 0
    return sum(numbers) / len(numbers)

# æµ‹è¯•ä»£ç 
scores = [85, 92, 78, 90, 88]
average = calculate_average(scores)
print(f"å¹³å‡åˆ†: {average}")</textarea>
                        <div class="code-output" id="code-output">
                            
                        </div>
                    </div>
                    
                    <div class="chat-area">
                        <div class="chat-messages" id="in-class-chat-messages">
                            <div class="message ai-message">
                                <div class="message-author">AIåŠ©æ‰‹</div>
                                æˆ‘æ˜¯ä½ çš„ç¼–ç¨‹ä¼™ä¼´ï¼Œé‡åˆ°ä»»ä½•æŠ€æœ¯é—®é¢˜éƒ½å¯ä»¥é—®æˆ‘ï¼
                            </div>
                        </div>
                        <div class="chat-input">
                            <input type="text" class="message-input" id="in-class-message-input" placeholder="è¾“å…¥ç¼–ç¨‹é—®é¢˜æˆ–é”™è¯¯ä¿¡æ¯...">
                            <button class="send-button" id="in-class-send-button">å‘é€</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- è¯¾åå¤ä¹ åŒºåŸŸ -->
        <div class="section" id="after-class">
            <div class="section-header">
                <h2>è¯¾åå¤ä¹  <span class="badge">ä¸ªæ€§åŒ–å·©å›º</span></h2>
                <button class="btn btn-primary" id="refresh-progress">åˆ·æ–°å­¦ä¹ åˆ†æ</button>
            </div>
            
            <div class="section-content">
                <div class="progress-container" id="progress-container">
                    <h4>æœ¬èŠ‚è¯¾æŒæ¡æƒ…å†µ</h4>
                    <div class="progress-bar">
                        <div class="progress" id="progress-bar-fill"></div>
                    </div>
                    <div class="progress-info">
                        <span id="progress-percent">0%</span>
                        <span id="progress-text"></span>
                    </div>
                    <p id="suggestion-text">æ ¹æ®ä½ çš„è¯¾å ‚è¡¨ç°ï¼Œå»ºè®®é‡ç‚¹å¤ä¹ ï¼š<strong id="suggestion-topics"></strong></p>
                    <div class="suggestion-tags" id="suggestion-tags">
                        <!-- æ ‡ç­¾å°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
                    </div>
                </div>
                
                <div class="personalized-tasks">
                    <div class="task-card">
                        <span class="task-difficulty difficulty-easy">åŸºç¡€å·©å›º</span>
                        <div class="task-content">
                            <h4>å¾ªç¯ç»“æ„ç»ƒä¹ é¢˜</h4>
                            <p>5é“é’ˆå¯¹å¾ªç¯ç»“æ„çš„ä¸“é¡¹ç»ƒä¹ é¢˜ï¼Œå¸®åŠ©ä½ å·©å›ºåŸºç¡€çŸ¥è¯†ã€‚</p>
                        </div>
                        <div class="task-actions">
                            <button class="btn btn-primary exercise-btn" data-difficulty="easy">å¼€å§‹ç»ƒä¹ </button>
                        </div>
                    </div>
                    <div class="task-card">
                        <span class="task-difficulty difficulty-medium">èƒ½åŠ›æå‡</span>
                        <div class="task-content">
                            <h4>å‡½æ•°å®šä¹‰å°é¡¹ç›®</h4>
                            <p>åˆ›å»ºä¸€ä¸ªç®€å•çš„è®¡ç®—å™¨ç¨‹åºï¼Œç»ƒä¹ å‡½æ•°å®šä¹‰å’Œè°ƒç”¨ã€‚</p>
                        </div>
                        <div class="task-actions">
                            <button class="btn btn-secondary exercise-btn" data-difficulty="medium">å¼€å§‹é¡¹ç›®</button>
                        </div>
                    </div>
                    <div class="task-card">
                        <span class="task-difficulty difficulty-hard">æ‹“å±•æŒ‘æˆ˜</span>
                        <div class="task-content">
                            <h4>ç»¼åˆåº”ç”¨æŒ‘æˆ˜</h4>
                            <p>è®¾è®¡ä¸€ä¸ªå­¦ç”Ÿæˆç»©ç®¡ç†ç³»ç»Ÿï¼Œç»¼åˆåº”ç”¨æœ¬èŠ‚è¯¾æ‰€å­¦çŸ¥è¯†ã€‚</p>
                        </div>
                        <div class="task-actions">
                            <button class="btn btn-warning exercise-btn" data-difficulty="hard">æ¥å—æŒ‘æˆ˜</button>
                        </div>
                    </div>
                </div>
                
                <div class="chat-messages" id="after-class-chat-messages">
                    <div class="message ai-message">
                        <div class="message-author">AIåŠ©æ‰‹</div>
                        åœ¨å¤ä¹ ä¸­é‡åˆ°å›°éš¾ï¼Ÿæˆ‘å¯ä»¥ä¸ºä½ æä¾›é’ˆå¯¹æ€§çš„è®²è§£å’Œç¤ºä¾‹ã€‚
                    </div>
                </div>
                
                <div class="chat-input">
                    <input type="text" class="message-input" id="after-class-message-input" placeholder="è¾“å…¥å¤ä¹ ä¸­é‡åˆ°çš„é—®é¢˜...">
                    <button class="send-button" id="after-class-send-button">å‘é€</button>
                </div>
            </div>
        </div>
        
        <!-- å­¦ä¹ è¿›åº¦åŒºåŸŸ -->
        <div class="section" id="progress">
            <div class="section-header">
                <h2>å­¦ä¹ è¿›åº¦åˆ†æ</h2>
            </div>
            <div class="section-content" style="padding: 20px; text-align: center;">
                <h3>å­¦ä¹ æ•°æ®åˆ†æåŠŸèƒ½å¼€å‘ä¸­...</h3>
                <p>è¿™é‡Œå°†å±•ç¤ºæ‚¨çš„å­¦ä¹ è¿›åº¦ã€çŸ¥è¯†ç‚¹æŒæ¡æƒ…å†µå’Œä¸ªæ€§åŒ–å­¦ä¹ å»ºè®®ã€‚</p>
            </div>
        </div>
    </div>

    <script>
        // é…ç½®
        const API_BASE_URL = 'http://localhost:8000';
        
        // ä¼šè¯ç®¡ç†
        let sessionId = 'student_' + Date.now();
        let currentProjectId = null;
        let currentTopic = 'Pythonå¾ªç¯ç»“æ„'; // é»˜è®¤çŸ¥è¯†ç‚¹
		let currentProgress = 0; // é»˜è®¤è¿›åº¦
        let currentSuggestions = []; // é»˜è®¤å»ºè®®å¤ä¹ ç‚¹
        
        // å¯¼èˆªåˆ‡æ¢
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function() {
                // ç§»é™¤æ‰€æœ‰activeç±»
                document.querySelectorAll('.nav-item').forEach(nav => {
                    nav.classList.remove('active');
                });
                document.querySelectorAll('.section').forEach(section => {
                    section.classList.remove('active');
                });
                
                // æ·»åŠ activeç±»åˆ°å½“å‰é¡¹
                this.classList.add('active');
                const targetId = this.getAttribute('data-target');
                document.getElementById(targetId).classList.add('active');
                
                // å¦‚æœåˆ‡æ¢åˆ°è¯¾åå¤ä¹ åŒºåŸŸï¼ŒåŠ è½½å­¦ä¹ è¿›åº¦
                if (targetId === 'after-class') {
                    loadLearningProgress();
                }
            });
        });
        
        // é¢„ä¹ éš¾åº¦é€‰æ‹©
        document.querySelectorAll('.level-card').forEach(card => {
            card.addEventListener('click', function() {
                document.querySelectorAll('.level-card').forEach(c => {
                    c.classList.remove('active');
                });
                this.classList.add('active');
            });
        });
        
        // è®¾ç½®çŸ¥è¯†ç‚¹
        document.getElementById('set-topic').addEventListener('click', function() {
            const topicInput = document.getElementById('preview-topic');
            const topic = topicInput.value.trim();
            
            if (topic) {
                currentTopic = topic;
                showStatus('preview-material', `å·²è®¾ç½®é¢„ä¹ çŸ¥è¯†ç‚¹ä¸º: ${topic}`, 'success');
            } else {
                showStatus('preview-material', 'è¯·è¾“å…¥æœ‰æ•ˆçš„çŸ¥è¯†ç‚¹', 'error');
            }
        });
        
        // çŸ¥è¯†ç‚¹å»ºè®®ç‚¹å‡»
        document.querySelectorAll('.topic-suggestion').forEach(suggestion => {
            suggestion.addEventListener('click', function() {
                const topic = this.getAttribute('data-topic');
                document.getElementById('preview-topic').value = topic;
                currentTopic = topic;
                showStatus('preview-material', `å·²è®¾ç½®é¢„ä¹ çŸ¥è¯†ç‚¹ä¸º: ${topic}`, 'success');
            });
        });
        
        // æ·»åŠ æ¶ˆæ¯åˆ°èŠå¤©çª—å£çš„é€šç”¨å‡½æ•°
        function addMessage(chatContainerId, content, isUser = false) {
            const chatMessages = document.getElementById(chatContainerId);
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'ai-message'}`;
            
            const authorDiv = document.createElement('div');
            authorDiv.className = 'message-author';
            authorDiv.textContent = isUser ? 'ä½ ' : 'AIåŠ©æ‰‹';
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.textContent = content;
            
            messageDiv.appendChild(authorDiv);
            messageDiv.appendChild(contentDiv);
            
            chatMessages.appendChild(messageDiv);
            // æ»šåŠ¨åˆ°åº•éƒ¨
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            return messageDiv;
        }
        
        // æ˜¾ç¤ºçŠ¶æ€æ¶ˆæ¯
        function showStatus(elementId, message, type = 'success') {
            const element = document.getElementById(elementId);
            if (!element) {
                console.error(`Element with id '${elementId}' not found`);
                return;
            }
            
            const statusDiv = document.createElement('div');
            statusDiv.className = `status-message ${type === 'success' ? 'status-success' : 'status-error'}`;
            statusDiv.textContent = message;
            
            // ç§»é™¤ä¹‹å‰çš„çŠ¶æ€æ¶ˆæ¯
            const existingStatus = element.querySelector('.status-message');
            if (existingStatus) {
                existingStatus.remove();
            }
            
            // æ·»åŠ æ–°çš„çŠ¶æ€æ¶ˆæ¯
            element.insertBefore(statusDiv, element.firstChild);
            
            // 5ç§’åè‡ªåŠ¨ç§»é™¤
            setTimeout(() => {
                if (statusDiv.parentNode) {
                    statusDiv.parentNode.removeChild(statusDiv);
                }
            }, 5000);
        }
        
        // è°ƒç”¨APIçš„é€šç”¨å‡½æ•°
        async function callApi(endpoint, data = {}, method = 'POST') {
            try {
                const response = await fetch(`${API_BASE_URL}${endpoint}`, {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: method === 'POST' ? JSON.stringify(data) : undefined
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                return await response.json();
            } catch (error) {
                console.error('APIè°ƒç”¨é”™è¯¯:', error);
                throw error;
            }
        }
        
        // å‘é€æ¶ˆæ¯çš„é€šç”¨å‡½æ•°
        async function sendChatMessage(chatContainerId, inputId, buttonId, phase) {
            const inputElement = document.getElementById(inputId);
            const buttonElement = document.getElementById(buttonId);
            const message = inputElement.value.trim();
            
            if (!message) return;
            
            // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
            addMessage(chatContainerId, message, true);
            inputElement.value = '';
            buttonElement.disabled = true;
            
            // æ·»åŠ åŠ è½½çŠ¶æ€
            const loadingDiv = document.createElement('div');
            loadingDiv.className = 'loading';
            loadingDiv.textContent = 'AIæ­£åœ¨æ€è€ƒä¸­...';
            document.getElementById(chatContainerId).appendChild(loadingDiv);
            
            try {
                const response = await callApi('/api/chat', {
                    message: message,
                    session_id: sessionId,
                    phase: phase
                });
                
                // ç§»é™¤åŠ è½½çŠ¶æ€
                document.getElementById(chatContainerId).removeChild(loadingDiv);
                
                if (response.success) {
                    addMessage(chatContainerId, response.message);
                } else {
                    addMessage(chatContainerId, 'æŠ±æ­‰ï¼ŒAIæš‚æ—¶æ— æ³•å“åº”ï¼Œè¯·ç¨åå†è¯•ã€‚');
                    showStatus(chatContainerId, response.message, 'error');
                }
            } catch (error) {
                document.getElementById(chatContainerId).removeChild(loadingDiv);
                addMessage(chatContainerId, 'ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥è¿æ¥åé‡è¯•ï¼');
                showStatus(chatContainerId, 'ç½‘ç»œè¿æ¥é”™è¯¯ï¼Œè¯·æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦è¿è¡Œåœ¨localhost:8000', 'error');
            } finally {
                buttonElement.disabled = false;
            }
        }
        
        // ç»‘å®šè¯¾å‰é¢„ä¹ èŠå¤©äº‹ä»¶
        document.getElementById('preview-send-button').addEventListener('click', () => {
            sendChatMessage('preview-chat-messages', 'preview-message-input', 'preview-send-button', 'pre-class');
        });
        
        document.getElementById('preview-message-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendChatMessage('preview-chat-messages', 'preview-message-input', 'preview-send-button', 'pre-class');
            }
        });
        
        // ç»‘å®šè¯¾ä¸­å­¦ä¹ èŠå¤©äº‹ä»¶
        document.getElementById('in-class-send-button').addEventListener('click', () => {
            sendChatMessage('in-class-chat-messages', 'in-class-message-input', 'in-class-send-button', 'in-class');
        });
        
        document.getElementById('in-class-message-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendChatMessage('in-class-chat-messages', 'in-class-message-input', 'in-class-send-button', 'in-class');
            }
        });
        
        // ç»‘å®šè¯¾åå¤ä¹ èŠå¤©äº‹ä»¶
        document.getElementById('after-class-send-button').addEventListener('click', () => {
            sendChatMessage('after-class-chat-messages', 'after-class-message-input', 'after-class-send-button', 'after-class');
        });
        
        document.getElementById('after-class-message-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendChatMessage('after-class-chat-messages', 'after-class-message-input', 'after-class-send-button', 'after-class');
            }
        });
        
        // åŠ è½½å­¦ä¹ è¿›åº¦åˆ†æ
        async function loadLearningProgress() {
            try {
                const response = await callApi('/api/analyze-progress', {
                    session_id: sessionId
                });
                
                if (response.success) {
                    updateProgressUI(response);
                } else {
					// å¤„ç†æ•°æ®ä¸è¶³çš„æƒ…å†µ
                    if (response.data_insufficient) {
                        showStatus('progress-container', response.message || 'å¯¹è¯æ•°æ®ä¸è¶³ï¼Œæ— æ³•è¿›è¡Œåˆ†æ', 'error');
                    } else {
                        showStatus('progress-container', response.message || 'ä½¿ç”¨é»˜è®¤å­¦ä¹ åˆ†ææ•°æ®', 'error');
                    }
                    // ä½¿ç”¨é»˜è®¤å€¼
                    const defaultProgress = {
                        progress: 0,
                        suggestions: [],
                        strengths: [],
                        weaknesses: []
                    };
					updateProgressUI(defaultProgress);
                }
            } catch (error) {
				console.log(error)
                showStatus('progress-container', 'ç½‘ç»œè¿æ¥é”™è¯¯ï¼Œä½¿ç”¨é»˜è®¤å­¦ä¹ åˆ†ææ•°æ®', 'error');
                
                // ä½¿ç”¨é»˜è®¤å€¼
                const defaultProgress = {
                    progress: 0,
                    suggestions: [],
                    strengths: [],
                    weaknesses: []
                };
                updateProgressUI(defaultProgress);
            }
        }
		
		 // ä¿å­˜è¯¾åå¤ä¹ çš„å­¦ä¹ åˆ†ææ•°æ®
        let currentProgressData = null;
		
		// æ›´æ–°å­¦ä¹ è¿›åº¦UI
        function updateProgressUI(progressData) {
            // ä¿å­˜å­¦ä¹ åˆ†ææ•°æ®
            currentProgressData = progressData;
            
            // æ›´æ–°è¿›åº¦æ¡
            const progressBar = document.getElementById('progress-bar-fill');
            const progressPercent = document.getElementById('progress-percent');
            const progressText = document.getElementById('progress-text');
            const suggestionTopics = document.getElementById('suggestion-topics');
            const suggestionTags = document.getElementById('suggestion-tags');
            
            if (!progressBar || !progressPercent || !progressText || !suggestionTopics || !suggestionTags) {
                console.error('æ›´æ–°å­¦ä¹ è¿›åº¦UIå¤±è´¥ï¼šå¿…éœ€çš„DOMå…ƒç´ ä¸å­˜åœ¨');
                return;
            }
            
            // ä½¿ç”¨å®‰å…¨å–å€¼ï¼Œå¤„ç†ç©ºå€¼æƒ…å†µ
            const progressValue = progressData.progress || 0; // é»˜è®¤å€¼ä¸º0
            const suggestions = progressData.suggestions || []; // é»˜è®¤å€¼ä¸ºç©ºæ•°ç»„
            const strengths = progressData.strengths || []; // é»˜è®¤å€¼ä¸ºç©ºæ•°ç»„
            const weaknesses = progressData.weaknesses || []; // é»˜è®¤å€¼ä¸ºç©ºæ•°ç»„
            
            progressBar.style.width = `${progressValue}%`;
            progressPercent.textContent = `${progressValue}%`;
            
            // æ ¹æ®è¿›åº¦è®¾ç½®æ–‡æœ¬å’Œé¢œè‰²
            if (progressValue >= 80) {
                progressText.textContent = 'ä¼˜ç§€';
                progressBar.style.background = '#52c41a';
            } else if (progressValue >= 60) {
                progressText.textContent = 'è‰¯å¥½';
                progressBar.style.background = '#fa8c16';
            } else {
                progressText.textContent = 'éœ€åŠ å¼º';
                progressBar.style.background = '#ff4d4f';
            }
            
            // æ›´æ–°å»ºè®®å¤ä¹ å†…å®¹
            if (suggestions.length > 0) {
                suggestionTopics.textContent = suggestions.join('ã€');
                
                // æ¸…ç©ºç°æœ‰æ ‡ç­¾
                suggestionTags.innerHTML = '';
                
                // æ·»åŠ æ–°æ ‡ç­¾
                suggestions.forEach(topic => {
                    const tag = document.createElement('span');
                    tag.className = 'suggestion-tag';
                    tag.textContent = topic;
                    suggestionTags.appendChild(tag);
                });
                
                // åŒæ—¶æ›´æ–°ä»»åŠ¡å¡ç‰‡ä¸­çš„å†…å®¹
                updateTaskCards(suggestions, strengths, weaknesses);
            } else {
                suggestionTopics.textContent = 'æš‚æ— ç‰¹å®šå»ºè®®';
                suggestionTags.innerHTML = '';
            }
            
            // å¦‚æœæœ‰æ¶ˆæ¯ï¼Œæ˜¾ç¤ºæ¶ˆæ¯
            if (progressData.message) {
                showStatus('progress-container', progressData.message, 'info');
            }
        }
		
		// æ ¹æ®å­¦ä¹ åˆ†ææ•°æ®æ›´æ–°ä»»åŠ¡å¡ç‰‡
        function updateTaskCards(suggestions, strengths, weaknesses) {
            // æ›´æ–°åŸºç¡€å·©å›ºä»»åŠ¡å¡ç‰‡
            const easyTask = document.querySelector('.task-card:nth-child(1) .task-content h4');
            const easyDesc = document.querySelector('.task-card:nth-child(1) .task-content p');
            
            if (easyTask && easyDesc && suggestions.length > 0) {
                easyTask.textContent = `${suggestions[0]}åŸºç¡€ç»ƒä¹ `;
                easyDesc.textContent = `é’ˆå¯¹${suggestions[0]}çš„ä¸“é¡¹ç»ƒä¹ é¢˜ï¼Œå¸®åŠ©ä½ å·©å›ºåŸºç¡€çŸ¥è¯†ã€‚`;
            }
            
            // æ›´æ–°èƒ½åŠ›æå‡ä»»åŠ¡å¡ç‰‡
            const mediumTask = document.querySelector('.task-card:nth-child(2) .task-content h4');
            const mediumDesc = document.querySelector('.task-card:nth-child(2) .task-content p');
            
            if (mediumTask && mediumDesc && suggestions.length > 0) {
                mediumTask.textContent = `${suggestions[0]}åº”ç”¨é¡¹ç›®`;
                mediumDesc.textContent = `åˆ›å»ºä¸€ä¸ª${suggestions[0]}çš„å®é™…åº”ç”¨ï¼Œç»ƒä¹ çŸ¥è¯†ç‚¹çš„ç»¼åˆè¿ç”¨ã€‚`;
            }
            
            // æ›´æ–°æ‹“å±•æŒ‘æˆ˜ä»»åŠ¡å¡ç‰‡
            const hardTask = document.querySelector('.task-card:nth-child(3) .task-content h4');
            const hardDesc = document.querySelector('.task-card:nth-child(3) .task-content p');
            
            if (hardTask && hardDesc && suggestions.length > 0) {
                hardTask.textContent = `ç»¼åˆåº”ç”¨æŒ‘æˆ˜`;
                hardDesc.textContent = `è®¾è®¡ä¸€ä¸ªç»¼åˆåº”ç”¨ç³»ç»Ÿï¼Œç»“åˆ${suggestions.join('ã€')}ç­‰çŸ¥è¯†ç‚¹ã€‚`;
            }
        }
        
        // åˆ·æ–°å­¦ä¹ åˆ†æ
        document.getElementById('refresh-progress').addEventListener('click', function() {
            const button = this;
            button.disabled = true;
            button.textContent = 'åˆ†æä¸­...';
            
            loadLearningProgress().finally(() => {
                button.disabled = false;
                button.textContent = 'åˆ·æ–°å­¦ä¹ åˆ†æ';
            });
        });
        
        // ç”Ÿæˆé¢„ä¹ ææ–™
        document.getElementById('generate-preview').addEventListener('click', async function() {
            const level = document.querySelector('.level-card.active').getAttribute('data-level');
            const button = this;
            button.disabled = true;
            button.textContent = 'ç”Ÿæˆä¸­...';
            
            const targetElement = document.getElementById('preview-material');
            targetElement.innerHTML = "<p>AIæ­£åœ¨ç”Ÿæˆé¢„ä¹ ææ–™...</p>";
            
            try {
                const response = await callApi('/api/preview', {
                    level: level,
                    topic: currentTopic
                });
                
                if (response.success) {
                    targetElement.innerHTML = `
                        <h4>${currentTopic}é¢„ä¹ ææ–™ï¼ˆ${level === 'easy' ? 'åŸºç¡€ç‰ˆ' : level === 'medium' ? 'æ ‡å‡†ç‰ˆ' : 'è¿›é˜¶ç‰ˆ'}ï¼‰</h4>
                        <div style="white-space: pre-wrap; line-height: 1.6;">${response.material}</div>
                    `;
                    showStatus('preview-material', 'é¢„ä¹ ææ–™ç”ŸæˆæˆåŠŸï¼', 'success');
                } else {
                    targetElement.innerHTML = `<p>ç”Ÿæˆé¢„ä¹ ææ–™å¤±è´¥ï¼š${response.message}</p>`;
                    showStatus('preview-material', response.message, 'error');
                }
            } catch (error) {
                targetElement.innerHTML = '<p>ç”Ÿæˆé¢„ä¹ ææ–™æ—¶å‘ç”Ÿé”™è¯¯ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥ã€‚</p>';
                showStatus('preview-material', 'ç½‘ç»œè¿æ¥é”™è¯¯ï¼Œè¯·æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦è¿è¡Œåœ¨localhost:8000', 'error');
            } finally {
                button.disabled = false;
                button.textContent = 'ç”Ÿæˆé¢„ä¹ ææ–™';
            }
        });
        
        // ç”Ÿæˆé¢„ä¹ æµ‹éªŒ
        document.getElementById('generate-quiz').addEventListener('click', async function() {
            const level = document.querySelector('.level-card.active').getAttribute('data-level');
            const button = this;
            button.disabled = true;
            button.textContent = 'ç”Ÿæˆä¸­...';
            
            try {
                const response = await callApi('/api/exercise', {
                    topic: currentTopic,
                    level: level
                });
                
                if (response.success) {
                    // å°†æµ‹éªŒå†…å®¹å‘é€åˆ°èŠå¤©çª—å£
                    document.getElementById('preview-message-input').value = `è¯·ä¸ºæˆ‘ç”Ÿæˆå…³äº${currentTopic}çš„é¢„ä¹ æµ‹éªŒ`;
                    await sendChatMessage('preview-chat-messages', 'preview-message-input', 'preview-send-button', 'pre-class');
                    
                    // æ·»åŠ æµ‹éªŒå†…å®¹
                    setTimeout(() => {
                        addMessage('preview-chat-messages', response.exercise);
                    }, 1000);
                    
                    showStatus('preview-chat-messages', 'é¢„ä¹ æµ‹éªŒç”ŸæˆæˆåŠŸï¼', 'success');
                } else {
                    showStatus('preview-chat-messages', response.message, 'error');
                }
            } catch (error) {
                showStatus('preview-chat-messages', 'ç½‘ç»œè¿æ¥é”™è¯¯ï¼Œè¯·æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦è¿è¡Œåœ¨localhost:8000', 'error');
            } finally {
                button.disabled = false;
                button.textContent = 'ç”Ÿæˆé¢„ä¹ æµ‹éªŒ';
            }
        });
        
        // AIè°ƒè¯•åŠ©æ‰‹
        document.getElementById('debug-code').addEventListener('click', async function() {
            const code = document.getElementById('code-editor').value;
            const button = this;
            button.disabled = true;
            button.textContent = 'è°ƒè¯•ä¸­...';
            
            try {
                const response = await callApi('/api/debug', {
                    code: code
                });
                
                if (response.success) {
                    // å°†è°ƒè¯•ç»“æœå‘é€åˆ°èŠå¤©çª—å£
                    document.getElementById('in-class-message-input').value = "è¯·å¸®æˆ‘è°ƒè¯•è¿™æ®µä»£ç ";
                    await sendChatMessage('in-class-chat-messages', 'in-class-message-input', 'in-class-send-button', 'in-class');
                    
                    // æ·»åŠ è°ƒè¯•ç»“æœ
                    setTimeout(() => {
                        addMessage('in-class-chat-messages', response.result);
                    }, 1000);
                } else {
                    showStatus('in-class-chat-messages', response.message, 'error');
                }
            } catch (error) {
                showStatus('in-class-chat-messages', 'ç½‘ç»œè¿æ¥é”™è¯¯ï¼Œè¯·æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦è¿è¡Œåœ¨localhost:8000', 'error');
            } finally {
                button.disabled = false;
                button.textContent = 'AIè°ƒè¯•åŠ©æ‰‹';
            }
        });
        
        // è§£é‡Šä»£ç 
        document.getElementById('explain-code').addEventListener('click', async function() {
            const code = document.getElementById('code-editor').value;
            const button = this;
            button.disabled = true;
            button.textContent = 'è§£é‡Šä¸­...';
            
            try {
                const response = await callApi('/api/explain', {
                    code: code
                });
                
                if (response.success) {
                    // å°†è§£é‡Šç»“æœå‘é€åˆ°èŠå¤©çª—å£
                    document.getElementById('in-class-message-input').value = "è¯·è§£é‡Šè¿™æ®µä»£ç ";
                    await sendChatMessage('in-class-chat-messages', 'in-class-message-input', 'in-class-send-button', 'in-class');
                    
                    // æ·»åŠ è§£é‡Šç»“æœ
                    setTimeout(() => {
                        addMessage('in-class-chat-messages', response.explanation);
                    }, 1000);
                } else {
                    showStatus('in-class-chat-messages', response.message, 'error');
                }
            } catch (error) {
                showStatus('in-class-chat-messages', 'ç½‘ç»œè¿æ¥é”™è¯¯ï¼Œè¯·æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦è¿è¡Œåœ¨localhost:8000', 'error');
            } finally {
                button.disabled = false;
                button.textContent = 'è§£é‡Šä»£ç ';
            }
        });
        
        // ç”Ÿæˆä¸ªæ€§åŒ–ä½œä¸š
        document.querySelectorAll('.exercise-btn').forEach(btn => {
            btn.addEventListener('click', async function() {
                const difficulty = this.getAttribute('data-difficulty');
                const button = this;
                button.disabled = true;
                button.textContent = 'ç”Ÿæˆä¸­...';
                
                try {
                    // ä½¿ç”¨å­¦ä¹ åˆ†ææ•°æ®ä¸­çš„å»ºè®®å¤ä¹ ç‚¹
                    let topic = 'Pythonç¼–ç¨‹'; // é»˜è®¤ä¸»é¢˜
                    if (currentProgressData && currentProgressData.suggestions && currentProgressData.suggestions.length > 0) {
                        topic = currentProgressData.suggestions[0]; // ä½¿ç”¨ç¬¬ä¸€ä¸ªå»ºè®®å¤ä¹ ç‚¹
                    }
                    
                    const response = await callApi('/api/generate-homework', {
                        difficulty: difficulty,
                        topic: topic,
                        session_id: sessionId
                    });
                    
                    if (response.success) {
                        // å°†ä½œä¸šå†…å®¹å‘é€åˆ°èŠå¤©çª—å£
                        document.getElementById('after-class-message-input').value = `è¯·ä¸ºæˆ‘ç”Ÿæˆ${getDifficultyText(difficulty)}éš¾åº¦çš„${topic}ä½œä¸š`;
                        await sendChatMessage('after-class-chat-messages', 'after-class-message-input', 'after-class-send-button', 'after-class');
                        
                        // æ·»åŠ ä½œä¸šå†…å®¹
                        setTimeout(() => {
                            addMessage('after-class-chat-messages', response.homework);
                        }, 1000);
                        
                        showStatus('after-class-chat-messages', `${getDifficultyText(difficulty)}${topic}ä½œä¸šç”ŸæˆæˆåŠŸï¼`, 'success');
                    } else {
                        showStatus('after-class-chat-messages', response.message, 'error');
                    }
                } catch (error) {
                    showStatus('after-class-chat-messages', 'ç½‘ç»œè¿æ¥é”™è¯¯ï¼Œè¯·æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦è¿è¡Œåœ¨localhost:8000', 'error');
                } finally {
                    button.disabled = false;
                    button.textContent = getButtonText(difficulty);
                }
            });
        });
		
		function initTaskCards() {
            const defaultSuggestions = [];
            const defaultStrengths = [];
            const defaultWeaknesses = [];
            updateTaskCards(defaultSuggestions, defaultStrengths, defaultWeaknesses);
        }
        
        // è·å–éš¾åº¦æ–‡æœ¬
        function getDifficultyText(difficulty) {
            switch(difficulty) {
                case 'easy': return 'åŸºç¡€';
                case 'medium': return 'æ ‡å‡†';
                case 'hard': return 'è¿›é˜¶';
                default: return 'åŸºç¡€';
            }
        }
        
        // è·å–æŒ‰é’®æ–‡æœ¬
        function getButtonText(difficulty) {
            switch(difficulty) {
                case 'easy': return 'å¼€å§‹ç»ƒä¹ ';
                case 'medium': return 'å¼€å§‹é¡¹ç›®';
                case 'hard': return 'æ¥å—æŒ‘æˆ˜';
                default: return 'å¼€å§‹ç»ƒä¹ ';
            }
        }
        
        // ä¿å­˜é¡¹ç›®
        document.getElementById('save-project').addEventListener('click', async function() {
            const code = document.getElementById('code-editor').value;
            const output = document.getElementById('code-output').textContent;
            const button = this;
            button.disabled = true;
            button.textContent = 'ä¿å­˜ä¸­...';
            
            try {
                const response = await callApi('/api/save-project', {
                    code: code,
                    output: output,
                    name: `ä»£ç é¡¹ç›®_${new Date().toLocaleString()}`
                });
                
                if (response.success) {
                    currentProjectId = response.project_id;
                    showStatus('code-output', 'é¡¹ç›®ä¿å­˜æˆåŠŸï¼', 'success');
                } else {
                    showStatus('code-output', response.message, 'error');
                }
            } catch (error) {
                showStatus('code-output', 'ç½‘ç»œè¿æ¥é”™è¯¯ï¼Œè¯·æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦è¿è¡Œåœ¨localhost:8000', 'error');
            } finally {
                button.disabled = false;
                button.textContent = 'ä¿å­˜é¡¹ç›®';
            }
        });
		 
		 // å¯¼å‡ºé¡¹ç›®
		document.getElementById('export-code').addEventListener('click', function() {
            const code = document.getElementById('code-editor').value;
            if (!code.trim()) {
                showStatus('code-output', 'ä»£ç ä¸ºç©ºï¼Œæ— æ³•å¯¼å‡º', 'error');
                return;
            }
            
            // åˆ›å»ºBlobå¯¹è±¡
            const blob = new Blob([code], { type: 'text/x-python' });
            const url = URL.createObjectURL(blob);
            
            // åˆ›å»ºä¸‹è½½é“¾æ¥
            const a = document.createElement('a');
            a.href = url;
            a.download = 'my_code.py';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            // é‡Šæ”¾URLå¯¹è±¡
            URL.revokeObjectURL(url);
            
            showStatus('code-output', 'ä»£ç å·²å¯¼å‡ºä¸ºmy_code.py', 'success');
        });
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('AIåŠ©å­¦ç³»ç»Ÿå·²åŠ è½½ï¼Œä¼šè¯ID:', sessionId);
            console.log('å½“å‰é¢„ä¹ çŸ¥è¯†ç‚¹:', currentTopic);
            console.log('ç¡®ä¿åç«¯æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:8000');
            
            // åˆå§‹åŒ–å­¦ä¹ è¿›åº¦æ˜¾ç¤º
            const defaultProgress = {
                progress: 0,
                suggestions: [],
                strengths: [],
                weaknesses: []
            };
            updateProgressUI(defaultProgress);
            
            // åˆå§‹åŒ–ä»»åŠ¡å¡ç‰‡
            initTaskCards();
        });
    </script>
</body>
</html>